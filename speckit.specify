# Speckit: Specify (Technical Specification)

## 1. Product Overview
**Life Chart** is a viral "Astrology Momentum" application that visualizes a user's life using financial market metaphors. It treats life as a market, fortune/luck as "Momentum," and time as "Candlesticks."
**Tagline:** "This is not astrology. Itâ€™s a chart for your life momentum."

## 2. Core Features (User Stories)
- **Input (Onboarding)**:
    - **Fields**: Name (Required), Gender (Optional), Birth Date (Required), Birth Hour/Minute (Required), Birth Place (City Search).
    - **Visuals**: "Starfield" background (Particles.js, constellations floating).
    - **UI**: 50/50 Horizontal Split layout on desktop. Hero button with high-energy animated gradients.
    - System converts location to Lat/Lon/Timezone.
- **Life Candles Chart (Main View)**:
    - **Header**: Identity section with Zodiac Avatar (PNG), Name, Birth Date/Time/Place. Collapsible planetary details.
    - **Chart Area**:
        - **Visual**: Financial candlestick chart (Green/Red), TradingView logo hidden.
        - **Y-Axis**: Momentum Score (0-100).
        - **X-Axis**: Time (Day/Month/Year).
        - **Interactions**: Scroll/Drag, Click to open panel, Back to Today button.
        - **Pillars**: Unified toggle for 5 Life Pillars (Overall, Career, Money, Relationships, Energy).
    - **Interpretation (Detail View)**:
    - Click a candle to see: "Why" (Influences), "What" (Themes), "When" (Windows), and "How" (Advice).
    - Interpretation text using structured narrative logic.
- **Sharing (Viral Loop)**:
    - "Share Today's Candle" generates a shareable image/card with the chart and interpretation.

## 3. Data Model (Schema)

### `users`
- `id`: UUID (Primary Key, Supabase Auth)
- `birth_date`: Date
- `birth_time`: Time (nullable)
- `birth_city`: String
- `latitude`: Float
- `longitude`: Float
- `timezone`: String (IANA)
- `created_at`: Timestamp

### `daily_signals` (Cached Calculations)
- `user_id`: UUID (FK)
- `date`: Date
- `momentum_score`: Integer (0-100)
- `volatility`: Enum ('calm', 'dynamic', 'intense')
- `signal_tags`: Array<String>
- `algo_version`: String
- `created_at`: Timestamp
- **Unique Index**: `(user_id, date, algo_version)`

### `interpretations` (LLM Cache)
- `signal_id`: UUID (FK -> daily_signals.id)
- `content`: JSON (Structured interpretation)
- `created_at`: Timestamp

## 4. Tech Stack
- **Frontend**: Next.js 15+ (App Router), Tailwind CSS v4, Framer Motion.
- **Typography**: Cormorant Garamond (Display), Space Mono (Data), Inter (Body).
- **Charting**: `lightweight-charts`.
- **Database**: Supabase (PostgreSQL).
- **Deployment**: Vercel (Frontend), Railway (Backend Service).

## 5. System Architecture
- **Computation Layer**: Deterministic. Uses `astronomy-engine` to calculate planetary transits vs. natal positions.
- **Abstraction Layer**: Converts astrological angles into "Momentum" (0-100) and "Volatility".
- **Presentation Layer**: Renders these values as financial charts.

## 6. UX/UI Guidelines
- **Theme**: Financial/Trading App aesthetic (Dark mode default).
- **Tone**: "Market", "Signal", "Momentum". No "Zodiac" or "Magic" jargon.
- **Performance**: Instant chart rendering; Optimistic UI for switching timeframes.