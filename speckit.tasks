# Speckit: Tasks

## Setup
- [ ] Initialize Git Monorepo: `apps/web` (Next.js) and `apps/api` (Node.js).
- [ ] Install dependencies: `astronomy-engine`, `lightweight-charts`, `framer-motion`, `lucide-react`, `clsx`, `tailwind-merge`.
- [ ] Configure `apps/api`: Setup Express or Fastify server.
- [ ] Configure Supabase: Create project and get credentials.

## Backend (Calculation Engine)
- [ ] Create `apps/api/src/engine/astronomy.ts`: Wrapper for `astronomy-engine`.
- [ ] Implement `calculateNatalChart(date, lat, lon)`: Returns planetary positions.
- [ ] Implement `calculateTransits(date)`: Returns daily planetary positions.
- [ ] Implement `calculateMomentum(natal, transits)`: Logic to compute 0-100 Score and Volatility.
- [ ] **Test**: Write unit tests for `calculateMomentum` to ensure deterministic output.

## Database
- [ ] SQL: Create `public.users` table with `latitude`, `longitude`, `timezone`.
- [ ] SQL: Create `public.daily_signals` table (Composite key: user_id + date).
- [ ] SQL: Create `public.interpretations` table.

## Frontend (Chart & UI)
- [ ] Component `LifeChart`: Initialize `lightweight-charts` instance.
- [ ] Helper `transformToCandles(signals)`: Convert Momentum Score -> OHLC data (Open/High/Low/Close simulation).
- [ ] Component `TimeframeSelector`: Toggle Day/Month/Year.
- [ ] Component `OnboardingForm`: Input birth details. Use a mapping library or simple API for City -> Lat/Lon lookup.

## API Integration
- [ ] **API Endpoint** `POST /chart`: Accepts `{ birth_data, range }`. Returns `[candles]`.
- [ ] **API Endpoint** `GET /interpretation`: Accepts `{ signal_data }`. Checks cache -> Calls LLM -> Returns text.

## Virality
- [ ] Component `ShareCard`: Visual representation of "Today's Candle".
- [ ] Function `generateShareImage()`: Export component as PNG.

## Deploy
- [ ] Configure `railway.json` for `apps/api`.
- [ ] Configure `vercel.json` for `apps/web`.