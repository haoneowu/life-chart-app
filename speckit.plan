# Speckit: Plan (Implementation Strategy)

## Phase 1: Infrastructure & Core Engine
**Goal**: Set up the repo and the deterministic calculation engine.
- [x] Initialize Monorepo structure (Frontend + Backend).
- [x] **Backend**: Implement `NatalCalculator` using `astronomy-engine`.
- [x] **Backend**: Implement `TransitCalculator` and `MomentumScorer` (The proprietary algorithm).
- [x] Verify calculation outputs (Unit Tests).

## Phase 2: Frontend & Visualization
**Goal**: Render the "Life Candle" chart.
- [x] **Frontend**: Initialize Next.js with Tailwind.
- [x] Integrate `lightweight-charts`.
- [x] Build the `CandleChart` component (adapt momentum data to OHLC format).
- [x] Implement "Day", "Month", "Year" timeframe switching.

## Phase 2.5: Design & UX Polish (The "Wow" Factor)
**Goal**: Elevate the aesthetic to "Premium" and fix UX friction.
- [x] **Typography**: Switch to Google Fonts (Cormorant Garamond + Space Mono + Inter).
- [x] **Navigation**: Add Sidebar for app-like feel.
- [x] **Input**: Smart City Search (No more manual Lat/Lon).
- [x] **Interactions**: Chart clicking, micro-animations, historical dragging.

## Phase 3: User Onboarding & Data
**Goal**: Connect real user birth data to the engine.
- [x] **Database**: Design Supabase schema (`users`, `daily_signals`).
- [x] **Frontend**: Build Onboarding Flow (Date/Time/Precision Location picker).
- [x] **Backend**: API endpoint to receive user data -> Compute history -> Return chart data.

## Phase 3.5: Visual Immersion (The "Galaxy" Feel)
**Goal**: Implement the requested "Starfield" aesthetic and glassmorphism.
- [x] **Background**: Implement `ParticlesBackground` (Starfield + Constellations).
- [x] **Onboarding**: Update fields (Name, Gender, Hour/Min). Apply LG Split Layout + Glassmorphism.
- [x] **Assets**: Create/Import Zodiac PNG tokens.

## Phase 4: Advanced Charting & Data (Final MVP)
**Goal**: Full implementation of the K-Line PRD.
- [x] **Backend**: Update API to return full Planetary Details and Pillar variations.
- [x] **Frontend**: Build `ChartHeader` (Zodiac Avatar, Identity Display, Collapsible Details).
- [x] **Frontend**: Enhance `CandleChart` (Axis formatting, Interactions, Logo Hiding).
- [x] **Frontend**: Upgrade `DetailPanel` (Progressive disclosure, Why/What/When/How, Nav Arrows).

## Phase 4: Interpretation & LLM
**Goal**: Add the "Story" layer.
- [ ] **Backend**: Integrate LLM (Gemini/OpenAI) to generate text based on signal tags.
- [ ] **Frontend**: Build "Candle Detail" modal (BottomSheet on mobile).
- [ ] Implement caching for LLM responses to save costs.

## Phase 5: Virality & Polish
**Goal**: Optimize for sharing and launch.
- [ ] **Frontend**: Create "Share Card" generator (Canvas or HTML-to-Image).
- [ ] **UI**: Polish animations (Framer Motion) for "Cinematic" feel.
- [ ] **Deploy**: Production deploy to Vercel and Railway.